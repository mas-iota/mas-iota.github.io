(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{168:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return d})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return c}));var a=n(3),r=n(8),i=(n(0),n(176)),l={id:"indexed-fields",title:"Indexed Fields",sidebar_label:"Indexed Fields",description:null,keywords:["buildfire","index","indexes","database"],slug:"/indexed-fields"},d={unversionedId:"indexed-fields",id:"indexed-fields",isDocsHomePage:!1,title:"Indexed Fields",description:"We provide customized fields inside of _buildfire object to be used as indexed fields and to support high-performance search and sort query for plugin developers.",source:"@site/docs/Indexed-Fields.md",slug:"/indexed-fields",permalink:"/docs/indexed-fields",version:"current",sidebar_label:"Indexed Fields",sidebar:"api",previous:{title:"App Data",permalink:"/docs/app-data"},next:{title:"GeoData",permalink:"/docs/geodata"}},s=[{value:"Primitive &amp; Array Data Index",id:"primitive--array-data-index",children:[]},{value:"Array",id:"array",children:[]},{value:"Text Data Index (Text Search)",id:"text-data-index-text-search",children:[]},{value:"Advanced Options",id:"advanced-options",children:[{value:"<code>$search</code>",id:"search",children:[]},{value:"$language",id:"language",children:[]},{value:"$caseSensitive",id:"casesensitive",children:[]}]}],o={toc:s};function c(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"We provide customized fields inside of ",Object(i.b)("inlineCode",{parentName:"p"},"_buildfire")," object to be used as indexed fields and to support high-performance search and sort query for plugin developers."),Object(i.b)("p",null,"Basically, you will use all methods in ",Object(i.b)("a",{parentName:"p",href:"/docs/public-data"},Object(i.b)("inlineCode",{parentName:"a"},"publicData")),", ",Object(i.b)("a",{parentName:"p",href:"/docs/user-data"},Object(i.b)("inlineCode",{parentName:"a"},"userData"))," or ",Object(i.b)("a",{parentName:"p",href:"/docs/app-data"},Object(i.b)("inlineCode",{parentName:"a"},"appData"))," service, but you will need to pay attention to pass the values in a specific structure so we can make sure that these values will be indexed and to provide high-performance search query."),Object(i.b)("h2",{id:"primitive--array-data-index"},"Primitive & Array Data Index"),Object(i.b)("p",null,"Developers can store the needed values in the following fields inside of ",Object(i.b)("inlineCode",{parentName:"p"},"_buildfire.index")," object :"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"string1")," (string)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"number1")," (number)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"date1")," (date)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#array"},Object(i.b)("inlineCode",{parentName:"a"},"array1"))," (array)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"text")," (string)")),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Important")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"These are keywords and not meant to be replaced. Meaning ",Object(i.b)("inlineCode",{parentName:"p"},"string1")," isn't meant to be replaced with ",Object(i.b)("inlineCode",{parentName:"p"},"firstName")))),Object(i.b)("p",null,"This is the most important part, because the rest will follow like any other type of data. So when you insert the indexed values you need to put it like the JSON structure below:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'"_buildfire": {\n  "index": {\n    "string1": <string>,\n    "number1": <number>,\n    "date1": <date>,\n    "array1": <array>,\n    "text": <string>"\n  }\n}\n')),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"important")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Please note that you can use any combination of the above fields, we can make an index for you depends on the provided data in the ",Object(i.b)("inlineCode",{parentName:"p"},"_buildfire.index")," object ( you can provide ",Object(i.b)("inlineCode",{parentName:"p"},"string1")," and ",Object(i.b)("inlineCode",{parentName:"p"},"date1")," for example) it depends on your requirement."))),Object(i.b)("hr",null),Object(i.b)("h4",{id:"example"},"Example"),Object(i.b)("p",null,"Let's say that You have a use case to filter the data depending on a ",Object(i.b)("inlineCode",{parentName:"p"},"username")," (string value) and ",Object(i.b)("inlineCode",{parentName:"p"},"createdOn")," (date value). First you need to store a data in a way to make sure that the desired fields for the filters are in the indexed fields like the following:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'function addNewData(data) {\n  buildfire.publicData.insert(data, "primary", false, function (err, data) {\n    if (err) console.log("there was a problem saving your data");\n    else console.log("saved successfully");\n  });\n}\n\nvar data = {\n  username: "userId",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      date1: new Date(),\n      string1: "userId",\n    },\n  },\n};\n\naddNewData(data);\n\nvar searchUsingIndexedFields = {\n  filter: {\n    "_buildfire.index.date1": { $gt: new Date("2019-03-25T00:00:00.000") },\n    "_buildfire.index.string1": "userId",\n  },\n};\n\nbuildfire.publicData.search(\n  searchUsingIndexedFields,\n  "primary",\n  function (err, records) {\n    if (err) alert("there was a problem retrieving your data");\n    else {\n      alert("found " + records.length + " record(s)");\n      alert(JSON.stringify(records.length));\n    }\n  }\n);\n\n/*\nThis will return\n\n{\n  username: "userId",\n  createdOn: "2019-03-25T00:00:00.000",\n  data: "Some data",\n  _buildfire: {\n    index: {\n      date1: "2019-03-25T00:00:00.000",\n      string1: "userId",\n    },\n  },\n};\n\n*/\n')),Object(i.b)("h2",{id:"array"},"Array"),Object(i.b)("p",null,"To use an array in the index object, you should follow the below structure,\neach object in the array should have an attribute ",Object(i.b)("strong",{parentName:"p"},"string1"),"; ",Object(i.b)("strong",{parentName:"p"},"string1")," is the key for the index"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"array1 : [ {'string1' : key1 , _any_other_attributes_ } , {'string1' : key2 ,_any_other_attributes_}]\n")),Object(i.b)("h4",{id:"example-1"},"Example"),Object(i.b)("p",null,"Let's say that You have a use case to filter the data depending on user badges (array of objects), you need to store data in a way where you have to make sure that the desired fields for the filters are provided in the indexed fields like the following:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'function addNewData(data) {\n  buildfire.publicData.insert(data, "primary", false, function (err, data) {\n    if (err) console.log("there was a problem saving your data");\n    else console.log("saved successfully");\n  });\n}\n\nvar data = {\n  username: "userId",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      date1: new Date(),\n      string1: "userId",\n      array1: [\n        { string1: "VIP", badge: "VIP" },\n        { string1: "Elite", badge: "Elite" },\n      ],\n    },\n  },\n};\n\naddNewData(data);\n\nvar data = {\n  username: "userId2",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      date1: new Date(),\n      string1: "userId2",\n      array1: [\n        { string1: "VIP", badge: "VIP" },\n        { string1: "Important", badge: "Important" },\n        { string1: "Elite", badge: "Elite" },\n      ],\n    },\n  },\n};\n\naddNewData(data);\n\nvar searchThroughArrayOfObjects = {\n  filter: {\n    "_buildfire.index.array1.string1": "Important",\n  },\n};\n\nbuildfire.publicData.search(\n  searchThroughArrayOfObjects,\n  "primary",\n  function (err, records) {\n    if (err) alert("there was a problem retrieving your data");\n    else {\n      alert("found " + records.length + " record(s)");\n      alert(JSON.stringify(records.length));\n    }\n  }\n);\n\n/*\nThis will return\n\nlet x = {\n  username: "userId2",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      date1: new Date(),\n      string1: "userId2",\n      array1: [\n        { string1: "VIP" },\n        { string1: "Important" },\n        { string1: "Elite" },\n      ],\n    },\n  },\n};\n*/\n')),Object(i.b)("h2",{id:"text-data-index-text-search"},"Text Data Index (Text Search)"),Object(i.b)("p",null,"Developers can store the string content in the text field inside of ",Object(i.b)("inlineCode",{parentName:"p"},"_buildfire.index")," object to support text search queries on text content, this will help to speed up the retrieving process for the data."),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Important")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},'The text index is used to speed up search through text but it\'s not useful to apply fuzziness or using regex matching which means if you have "BuildFire" as a phrase stored in your text data and you are trying to search for "Bu" this will not return that document because search using text index will do the exact match on phrases.'))),Object(i.b)("p",null,"This is the most important part, because the rest will follow like any other type of data. So when you insert the data, you need to put the text like the below JSON structure to perform text search on the saved data:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'"_buildfire": {\n  "index": {\n    "text": "<text>"\n  }\n}\n')),Object(i.b)("p",null,"When you need to perform text search, the filter object must be like the following:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'{\n  "filter": {\n    "$text": { "$search": "Your text search" }\n  }\n}\n')),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"important")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Please note that in case you use the text index and use the primitive index adjacently in your search query, the query will make use of the text index and will not use the primitive index which will affect the search query performance."))),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'"_buildfire": {\n  "index": {\n    "string1": "<string>",\n    "number1": "<number>",\n    "date1": "<date>",\n    "text": "<long text>"\n  }\n}\n')),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"important")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The search query will use the text index ",Object(i.b)("strong",{parentName:"p"},"only")," and it will ignore the primitive index."))),Object(i.b)("hr",null),Object(i.b)("h4",{id:"example-2"},"Example"),Object(i.b)("p",null,"Let's say that You have a use case to filter the data depends on description (text), First you need to store a data in a way which you have to make sure that the desired fields for the filters are provided in the text field like the following:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'function addNewData(data) {\n  buildfire.publicData.insert(data, "primary", false, function (err, data) {\n    if (err) console.log("there was a problem saving your data");\n    else console.log("saved successfully");\n  });\n}\n\nvar data = {\n  username: "userId",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      text:\n        "The BuildFire platform is designed to be dynamic and open source, which means any existing features can be customized to the exact way you need them to be. Our in-house custom app development team can build any features specifically for your app from scratch.",\n    },\n  },\n};\n\naddNewData(data);\n\nvar searchUsingTextIndex = {\n  filter: {\n    $text: { $search: "BuildFire" },\n  },\n};\n\nbuildfire.publicData.search(\n  searchUsingTextIndex,\n  "primary",\n  function (err, records) {\n    if (err) alert("there was a problem retrieving your data");\n    else {\n      alert("found " + records.length + " record(s)");\n      alert(JSON.stringify(records.length));\n    }\n  }\n);\n\n/*\nThis will return\n\n{\n  username: "userId",\n  createdOn: new Date(),\n  data: "Some data",\n  _buildfire: {\n    index: {\n      text:\n        "The BuildFire platform is designed to be dynamic and open source, which means any existing features can be customized to the exact way you need them to be. Our in-house custom app development team can build any features specifically for your app from scratch.",\n    },\n  },\n};\n*/\n')),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Important Restrictions")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("ul",{parentName:"div"},Object(i.b)("li",{parentName:"ul"},"You cannot combine the ",Object(i.b)("inlineCode",{parentName:"li"},"$text")," expression, which requires a special text index, with a query operator that requires a different type of special index. For example you cannot combine ",Object(i.b)("inlineCode",{parentName:"li"},"$text")," expression with the ",Object(i.b)("inlineCode",{parentName:"li"},"$near")," operator."),Object(i.b)("li",{parentName:"ul"},"To use a ",Object(i.b)("inlineCode",{parentName:"li"},"$text")," query in an ",Object(i.b)("inlineCode",{parentName:"li"},"$or")," expression, all clauses in the ",Object(i.b)("inlineCode",{parentName:"li"},"$or")," array must be indexed.")))),Object(i.b)("h2",{id:"advanced-options"},"Advanced Options"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"$text")," operator accepts a text query document with the following fields:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "$text": {\n    "$search": "<string>",\n    "$language": "<string>",\n    "$caseSensitive": "<boolean>"\n  }\n}\n')),Object(i.b)("h3",{id:"search"},Object(i.b)("inlineCode",{parentName:"h3"},"$search")),Object(i.b)("p",null,"A string of terms that we use to allow the developers to use the text index. The text index performs a logical OR search of the terms unless specified as a phrase."),Object(i.b)("p",null,"In the ",Object(i.b)("inlineCode",{parentName:"p"},"$search")," field, specify a string of words that the text operator parses and uses to query the text index."),Object(i.b)("p",null,"The text operator treats most punctuation in the string as delimiters, except a hyphen-minus (-) that negates term or an escaped double quotes ",Object(i.b)("inlineCode",{parentName:"p"},'\\"')," that specifies a phrase."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Phrases"),Object(i.b)("p",{parentName:"li"},"To match on a phrase, as opposed to individual terms, enclose the phrase in escaped double quotes ",Object(i.b)("inlineCode",{parentName:"p"},'\\"'),", as in:"),Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},'"\\"ssl certificate\\""')),Object(i.b)("p",{parentName:"li"},"If the ",Object(i.b)("inlineCode",{parentName:"p"},"$search")," string includes a phrase and individual terms, text search will only match the documents that include the\nphrase."),Object(i.b)("p",{parentName:"li"},"For example, passed a ",Object(i.b)("inlineCode",{parentName:"p"},"$search")," string:\n",Object(i.b)("inlineCode",{parentName:"p"},'"\\"ssl certificate\\" authority key"'),"\nThe ",Object(i.b)("inlineCode",{parentName:"p"},"$text")," operator searches for the phrase ",Object(i.b)("inlineCode",{parentName:"p"},'"ssl certificate"'),".")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Negations"),Object(i.b)("p",{parentName:"li"},"Prefixing a word with a hyphen-minus ",Object(i.b)("inlineCode",{parentName:"p"},"-")," negates a word:"),Object(i.b)("p",{parentName:"li"},"The negated word excludes documents that contain the negated word from the result set. When passed a search string that only contains negated words, text search will not match any documents. A hyphenated word, such as pre-market, is not a negation. If used in a hyphenated word, $text operator treats the hyphen-minus ",Object(i.b)("inlineCode",{parentName:"p"},"-")," as a delimiter. To negate the word market in this instance, include a space between pre and ",Object(i.b)("inlineCode",{parentName:"p"},"-market"),",\ni.e., ",Object(i.b)("inlineCode",{parentName:"p"},"pre -market"),"."))),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"$text")," operator adds all negations to the query with the logical ",Object(i.b)("inlineCode",{parentName:"p"},"AND")," operator."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{ "$text": { "$search": "coffee -shop" } }\n')),Object(i.b)("h3",{id:"language"},"$language"),Object(i.b)("p",null,'The language that determines the list of stop words for the search and the rules for the tokenizer. If not specified, the search uses the default language of the index. If you specify a language value of "none", then the text search uses simple tokenization with no list of stop words.'),Object(i.b)("p",null,'Stop word example: ("to", "is", "are")'),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"Language Name"),Object(i.b)("th",{parentName:"tr",align:null},"ISO 639-1 (Two letter codes)"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"dutch"),Object(i.b)("td",{parentName:"tr",align:null},"nl")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"english"),Object(i.b)("td",{parentName:"tr",align:null},"en")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"finnish"),Object(i.b)("td",{parentName:"tr",align:null},"fi")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"french"),Object(i.b)("td",{parentName:"tr",align:null},"fr")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"german"),Object(i.b)("td",{parentName:"tr",align:null},"de")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"hungarian"),Object(i.b)("td",{parentName:"tr",align:null},"hu")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"italian"),Object(i.b)("td",{parentName:"tr",align:null},"it")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"norwegian"),Object(i.b)("td",{parentName:"tr",align:null},"nb")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"portuguese"),Object(i.b)("td",{parentName:"tr",align:null},"pt")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"romanian"),Object(i.b)("td",{parentName:"tr",align:null},"ro")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"russian"),Object(i.b)("td",{parentName:"tr",align:null},"ru")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"spanish"),Object(i.b)("td",{parentName:"tr",align:null},"es")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"swedish"),Object(i.b)("td",{parentName:"tr",align:null},"sv")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"turkish"),Object(i.b)("td",{parentName:"tr",align:null},"tr")))),Object(i.b)("h3",{id:"casesensitive"},"$caseSensitive"),Object(i.b)("p",null,"A boolean flag to enable or disable case sensitive search. Defaults to ",Object(i.b)("inlineCode",{parentName:"p"},"false"),"; i.e. the search defers to the case insensitivity of the text index."),Object(i.b)("h4",{id:"examples"},"Examples"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-javascript"},'function addNewData(data) {\n  buildfire.publicData.insert(data, "primary", false, function (err, data) {\n    if (err) console.log("there was a problem saving your data");\n    else console.log("saved successfully");\n  });\n}\n\nvar data = {\n  username: "userId",\n  _buildfire: {\n    index: {\n      text: "Buildfire mobile platform",\n    },\n  },\n};\n\nvar data1 = {\n  username: "userId1",\n  _buildfire: {\n    index: {\n      text: "buildfire mobile platform",\n    },\n  },\n};\n\nvar data2 = {\n  username: "userId2",\n  _buildfire: {\n    index: {\n      text: "mobile engine",\n    },\n  },\n};\n\naddNewData(data);\naddNewData(data1);\naddNewData(data2);\n\n/* The following query performs a case sensitive search for the term buildfire */\n\nvar sensitiveSearch = {\n  filter: {\n    $text: { $search: "buildfire", $caseSensitive: true },\n  },\n};\nbuildfire.publicData.search(\n  sensitiveSearch,\n  "primary",\n  function (err, records) {\n    if (err) alert("there was a problem retrieving your data");\n    else {\n      alert("found " + records.length + " record(s)");\n      alert(JSON.stringify(records.length));\n    }\n  }\n);\n\n/* The search matches data1\n   {\n     "username" : "userId1" ,\n    _buildfire :{\n      index : {\n          text : "buildfire mobile platform"\n       }\n      }\n  };\n*/\n\n/* The following query searches for the phrase mobile engine*/\n\nvar phraseSearch = {\n  filter: {\n    $text: { $search: \'"mobile engine"\' },\n  },\n};\n\nbuildfire.publicData.search(phraseSearch, "primary", function (err, records) {\n  if (err) alert("there was a problem retrieving your data");\n  else {\n    alert("found " + records.length + " record(s)");\n    alert(JSON.stringify(records.length));\n  }\n});\n\n/* This query returns documents that contain the phrase mobile engine which is data2\n\n{\n    "username": "userId2",\n    _buildfire: {\n        index: {\n            text: "mobile engine"\n        }\n    }\n};\n\n*/\n\n/* The following query specifies a string of two terms delimited by space, "mobile buildfire" */\n\nvar twoTermsSearch = {\n  filter: {\n    $text: { $search: "mobile buildfire" },\n  },\n};\n\nbuildfire.publicData.search(twoTermsSearch, "primary", function (err, records) {\n  if (err) alert("there was a problem retrieving your data");\n  else {\n    alert("found " + records.length + " record(s)");\n    alert(JSON.stringify(records.length));\n  }\n});\n\n/* This query returns documents that contain either mobile or buildfire\n\n{\n    "username": "userId",\n    _buildfire: {\n        index: {\n            text: "Buildfire mobile platform"\n        }\n    }\n};\n\n\n{\n    "username": "userId1",\n    "createdOn": new Date(),\n    _buildfire: {\n        index: {\n            text: "buildfire mobile platform"\n        }\n    }\n};\n\n\n{\n    "username": "userId2",\n    _buildfire: {\n        index: {\n            text: "mobile engine"\n        }\n    }\n};\n*/\n\n/*\nA negated term is a term that is prefixed by a minus sign -.\n\nIf you negate a term, the $text operator will exclude the documents that contain those terms from the results.\nThe following example searches for documents that contain the words mobile but do not contain the term platform\n\n*/\n\nvar negatedTermSearch = {\n  filter: {\n    $text: { $search: "mobile -platform" },\n  },\n};\nbuildfire.publicData.search(\n  negatedTermSearch,\n  "primary",\n  function (err, records) {\n    if (err) alert("there was a problem retrieving your data");\n    else {\n      alert("found " + records.length + " record(s)");\n      alert(JSON.stringify(records.length));\n    }\n  }\n);\n\n/* This query returns documents that contain mobile but doesn\'t contain platform\n{\n    "username": "userId2",\n    _buildfire: {\n        index: {\n            text: "mobile engine"\n        }\n    }\n}\n*/\n')))}c.isMDXComponent=!0},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=r.a.createContext({}),c=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):d(d({},t),e)),n},b=function(e){var t=c(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),b=c(n),u=a,m=b["".concat(l,".").concat(u)]||b[u]||p[u]||i;return n?r.a.createElement(m,d(d({ref:t},o),{},{components:n})):r.a.createElement(m,d({ref:t},o))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var d={};for(var s in t)hasOwnProperty.call(t,s)&&(d[s]=t[s]);d.originalType=e,d.mdxType="string"==typeof e?e:a,l[1]=d;for(var o=2;o<i;o++)l[o]=n[o];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);
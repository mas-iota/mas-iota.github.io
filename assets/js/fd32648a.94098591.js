"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[543],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=d(e,["components","mdxType","originalType","parentName"]),m=p(a),k=r,c=m["".concat(o,".").concat(k)]||m[k]||s[k]||l;return a?n.createElement(c,i(i({ref:t},u),{},{components:a})):n.createElement(c,i({ref:t},u))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var d={};for(var o in t)hasOwnProperty.call(t,o)&&(d[o]=t[o]);d.originalType=e,d.mdxType="string"==typeof e?e:r,i[1]=d;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5564:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>s,frontMatter:()=>l,metadata:()=>d,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const l={id:"user-data",title:"User Data",sidebar_label:"User Data",description:"User Data: Save user data from the widget",keywords:["buildfire","userdata","widget"],slug:"/user-data"},i="buildfire.userData",d={unversionedId:"user-data",id:"user-data",title:"User Data",description:"User Data: Save user data from the widget",source:"@site/docs/User-Data.md",sourceDirName:".",slug:"/user-data",permalink:"/docs/user-data",draft:!1,tags:[],version:"current",frontMatter:{id:"user-data",title:"User Data",sidebar_label:"User Data",description:"User Data: Save user data from the widget",keywords:["buildfire","userdata","widget"],slug:"/user-data"},sidebar:"api",previous:{title:"Datastore Dynamic Data",permalink:"/docs/datastore-dynamic-data"},next:{title:"Public Data",permalink:"/docs/public-data"}},o={},p=[{value:"Methods",id:"methods",level:2},{value:'<code>get()</code> <div class="label control"></div><div class="label widget"></div>',id:"get-",level:3},{value:"<code>tag</code>",id:"tag",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result",level:4},{value:"result",id:"result",level:5},{value:"More Examples",id:"more-examples",level:4},{value:'<code>getById()</code> <div class="label control"></div><div class="label widget"></div>',id:"getbyid-",level:3},{value:"<code>id</code>",id:"id",level:4},{value:"<code>tag</code>",id:"tag-1",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-1",level:4},{value:"result",id:"result-1",level:5},{value:'<code>save()</code> <div class="label widget"></div>',id:"save-",level:3},{value:"<code>obj</code>",id:"obj",level:4},{value:"<code>tag</code>",id:"tag-2",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-2",level:4},{value:"result",id:"result-2",level:5},{value:'<code>insert()</code> <div class="label widget"></div>',id:"insert-",level:3},{value:"<code>obj</code>",id:"obj-1",level:4},{value:"<code>tag</code>",id:"tag-3",level:4},{value:"<code>checkDuplicate</code>",id:"checkduplicate",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-3",level:4},{value:"<code>result</code>",id:"result-3",level:5},{value:'<code>bulkInsert()</code> <div class="label widget"></div>',id:"bulkinsert-",level:3},{value:"<code>obj</code>",id:"obj-2",level:4},{value:"<code>tag</code>",id:"tag-4",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-4",level:4},{value:"<code>result</code>",id:"result-4",level:5},{value:'<code>update()</code> <div class="label widget"></div>',id:"update-",level:3},{value:"<code>id</code>",id:"id-1",level:4},{value:"<code>obj</code>",id:"obj-3",level:4},{value:"<code>tag</code>",id:"tag-5",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-5",level:4},{value:"<code>result</code>",id:"result-5",level:5},{value:"More Examples",id:"more-examples-1",level:4},{value:'<code>searchAndUpdate()</code> <div class="label widget"></div>',id:"searchandupdate-",level:3},{value:"<code>search</code>",id:"search",level:4},{value:"<code>obj</code>",id:"obj-4",level:4},{value:"<code>tag</code>",id:"tag-6",level:4},{value:"<code>callback(err, status)</code>",id:"callbackerr-status",level:4},{value:"<code>result</code>",id:"result-6",level:5},{value:"More Examples",id:"more-examples-2",level:4},{value:'<code>delete()</code> <div class="label widget"></div>',id:"delete-",level:3},{value:"<code>id</code>",id:"id-2",level:4},{value:"<code>tag</code>",id:"tag-7",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-6",level:4},{value:"More examples",id:"more-examples-3",level:4},{value:'<code>search()</code> <div class="label control"></div><div class="label widget"></div>',id:"search-",level:3},{value:"<code>options</code>",id:"options",level:4},{value:"<code>tag</code>",id:"tag-8",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-7",level:4},{value:"More examples",id:"more-examples-4",level:4},{value:'<code>aggregate()</code> <div class="label control"></div><div class="label widget"></div>',id:"aggregate-",level:3},{value:"<code>params</code>",id:"params",level:4},{value:"<code>tag</code>",id:"tag-9",level:4},{value:"<code>callback(err, result)</code>",id:"callbackerr-result-8",level:4},{value:"More examples",id:"more-examples-5",level:4},{value:"Equality Match",id:"equality-match",level:5},{value:"Perform a Count",id:"perform-a-count",level:5},{value:"Perform Sum and Average",id:"perform-sum-and-average",level:5},{value:"Perform Min and Max with Grouping",id:"perform-min-and-max-with-grouping",level:5},{value:"Exclude Fields",id:"exclude-fields",level:5},{value:"Full Aggregation Example",id:"full-aggregation-example",level:4},{value:'<code>onUpdate()</code> <div class="label wdiget"></div>',id:"onupdate-",level:3},{value:"<code>callback(event)</code>",id:"callbackevent",level:4},{value:"<code>allowMultipleHandlers</code>",id:"allowmultiplehandlers",level:4}],u={toc:p};function s(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"buildfireuserdata"},(0,r.kt)("inlineCode",{parentName:"h1"},"buildfire.userData")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"userData")," is a framework provided in ",(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.js")," that allows the app user and app owner to save and retrieve simple and complex data. The framework facilitates CRUD operations common to all data operations as well as searching, sorting and paging complex data."),(0,r.kt)("p",null,"This service also takes care of all server side infrastructure to unburden the developer and app owner for developing the server side components and the costs of running a server. This service is provided out of the box at no additional charge."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"userData")," service also handles caching of data and other performance enhancements."),(0,r.kt)("p",null,"The use of the ",(0,r.kt)("inlineCode",{parentName:"p"},"userData")," is completely optional. The developer may choose to communicate with his own custom api."),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"userData")," has read/write permissions on widget side. ",(0,r.kt)("inlineCode",{parentName:"p"},"userData")," is data that is saved from the widget side and only accessable to user that initiated the request and only on current plugin. If you want to save data from widget side and have it available to other users, check out ",(0,r.kt)("a",{parentName:"p",href:"/docs/public-data"},(0,r.kt)("inlineCode",{parentName:"a"},"publicData"))," or if you want data to be accessable by other plugins, check out ",(0,r.kt)("a",{parentName:"p",href:"/docs/app-data"},(0,r.kt)("inlineCode",{parentName:"a"},"appData")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If you want to work with ",(0,r.kt)("strong",{parentName:"p"},"Geospatial")," data check ",(0,r.kt)("a",{parentName:"p",href:"/docs/geodata"},"GeoData Wiki"))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"To support high performance search and sort query check ",(0,r.kt)("a",{parentName:"p",href:"/docs/indexed-fields"},"Indexed Fields"))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can see an example of using User Data in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/BuildFire/simpleBuildFireJSExamples/tree/master/exampleWidgetUserDataPlugin"},"https://github.com/BuildFire/simpleBuildFireJSExamples/tree/master/exampleWidgetUserDataPlugin"))),(0,r.kt)("h2",{id:"methods"},"Methods"),(0,r.kt)("h3",{id:"get-"},(0,r.kt)("inlineCode",{parentName:"h3"},"get()")," ",(0,r.kt)("div",{class:"label control"}),(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.get(tag, callback)")),(0,r.kt)("p",null,"Calls the userData to retrieve plugin data objects in JSON format."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If there are many objects with the same id, only one random record will be returned")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.get("main record", (err, result) => {\n  if (err) return console.error("Error while retrieving your data", err);\n  console.log("Main record", result.data);\n});\n')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://maps.googleapis.com/maps/api/staticmap?size=70x61&markers=icon:http://foursquare.com/img/categories_v2/shops/financial_bg_64.png%7C37.446754,-77.572746&key=AIzaSyBS-cnC0cEI46YKuh6_rjMDIc1Pd9CGiT4"},"http://maps.googleapis.com/maps/api/staticmap?size=70x61&markers=icon:http://foursquare.com/img/categories_v2/shops/financial_bg_64.png|37.446754,-77.572746&key=AIzaSyBS-cnC0cEI46YKuh6_rjMDIc1Pd9CGiT4"),"\n",(0,r.kt)("a",{parentName:"p",href:"http://maps.googleapis.com/maps/api/staticmap?size=400x400&path=color:%235FB9EA%7Cweight:3%7C43,22%7C43,21&markers=icon:https://bajking.s3.eu-central-1.amazonaws.com/start2.png%7C37.446754,-77.572746&markers=icon:https://bajking.s3.eu-central-1.amazonaws.com/end2.png%7C43,21&key=AIzaSyBS-cnC0cEI46YKuh6_rjMDIc1Pd9CGiT4"},"http://maps.googleapis.com/maps/api/staticmap?size=400x400&path=color:%235FB9EA|weight:3|43,22|43,21&markers=icon:https://bajking.s3.eu-central-1.amazonaws.com/start2.png|37.446754,-77.572746&markers=icon:https://bajking.s3.eu-central-1.amazonaws.com/end2.png|43,21&key=AIzaSyBS-cnC0cEI46YKuh6_rjMDIc1Pd9CGiT4")),(0,r.kt)("h4",{id:"tag"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after something is done"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag and data")))),(0,r.kt)("h5",{id:"result"},"result"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object saved in userData under the selected tag")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object tag")))),(0,r.kt)("h4",{id:"more-examples"},"More Examples"),(0,r.kt)("p",null,"If your userData has only one object and does not use tags, you can skip the tag argument"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.get((err, result) => {\n  if (err) return console.error(err);\n\n  console.log("Data: ", result.data);\n});\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"getbyid-"},(0,r.kt)("inlineCode",{parentName:"h3"},"getById()")," ",(0,r.kt)("div",{class:"label control"}),(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.getById(id, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to retrieve plugin data object by id in JSON format."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.getById(\n  "55bfa813032868a0115c5f98",\n  "main record",\n  (err, result) => {\n    if (err) return console.error("Error while retrieving your data", err);\n    console.log("Object: ", result.data);\n  }\n);\n')),(0,r.kt)("h4",{id:"id"},(0,r.kt)("inlineCode",{parentName:"h4"},"id")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Datastore object id"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after something is done"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag and data")))),(0,r.kt)("h5",{id:"result-1"},"result"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object saved in userData under the selected id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"save-"},(0,r.kt)("inlineCode",{parentName:"h3"},"save()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.save(obj, tag, callback)")),(0,r.kt)("p",null,"This method calls the userData to update ",(0,r.kt)("strong",{parentName:"p"},"all")," plugin data objects that have that tag. if no object is found it will create one, and does not check for duplicates"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Data objects saved using ",(0,r.kt)("inlineCode",{parentName:"p"},"save()")," method will not get assigned ids. Data will be saved in the same format as provided.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.save(\n  { name: "John Doe", tel: "555-111-1111" },\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error("Error while saving your data", err);\n\n    console.log("Data saved successfully", result);\n  }\n);\n')),(0,r.kt)("h4",{id:"obj"},(0,r.kt)("inlineCode",{parentName:"h4"},"obj")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object to be stored in userData"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after something is done"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag and data")))),(0,r.kt)("h5",{id:"result-2"},"result"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object saved in userData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"insert-"},(0,r.kt)("inlineCode",{parentName:"h3"},"insert()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.insert(obj, tag, checkDuplicate, callback)")),(0,r.kt)("p",null,"Calls the userData to insert a data object. If an object already exists with this tag and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkDuplicate")," is false it will create another record otherwise it will return a duplicate entry error. Use this method to save multiple records under the same tag. Every inserted item will get unique id. You can use this id later in ",(0,r.kt)("a",{parentName:"p",href:"#"},(0,r.kt)("inlineCode",{parentName:"a"},"getById"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.insert(\n  { name: "John Doe", tel: "555-111-1111" },\n  "contactInfo",\n  false,\n  (err, result) => {\n    if (err) return console.error("Error while inserting your data", err);\n\n    console.log("Insert successful", result);\n  }\n);\n')),(0,r.kt)("h4",{id:"obj-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"obj")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object to be stored in userData"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-3"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"checkduplicate"},(0,r.kt)("inlineCode",{parentName:"h4"},"checkDuplicate")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"checkDuplicate")),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"If ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," it will prevent insertion of duplicate records, if ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," it will allow duplicates"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))))),(0,r.kt)("h4",{id:"callbackerr-result-3"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag, data and id")))),(0,r.kt)("h5",{id:"result-3"},(0,r.kt)("inlineCode",{parentName:"h5"},"result")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object inserted in userData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object unique id")))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"bulkinsert-"},(0,r.kt)("inlineCode",{parentName:"h3"},"bulkInsert()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.bulkInsert(obj, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to insert multiple data objects at once. If objects already exist with this tag it will create new records. Use this method to save multiple records with single API call."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Data objects inserted using ",(0,r.kt)("inlineCode",{parentName:"p"},"bulkInsert()")," method will not get assigned ids.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.bulkInsert(\n  [\n    { name: "John Doe", tel: "555-111-1111" },\n    { name: "Jane Doe", tel: "555-222-2222" },\n  ],\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error("Error while inserting your data", err);\n\n    console.log("Insert successful", result);\n  }\n);\n')),(0,r.kt)("h4",{id:"obj-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"obj")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"[object]"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of object to be inserted in userData"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-4"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-4"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag, data and id")))),(0,r.kt)("h5",{id:"result-4"},(0,r.kt)("inlineCode",{parentName:"h5"},"result")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object array inserted in userData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"update-"},(0,r.kt)("inlineCode",{parentName:"h3"},"update()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.update(id, obj, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to update the data object that matches that tag and id. If an object doesn't exist this operation will fail. Use this method to update a single record."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.update(\n  "55bfa813032868a0115c5f98", // Replace this with your object id\n  { name: "John Doe", tel: "555-111-2222" },\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error("Error while inserting your data", err);\n\n    console.log("Update successful", result);\n  }\n);\n')),(0,r.kt)("h4",{id:"id-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"id")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Datastore object id"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"obj-3"},(0,r.kt)("inlineCode",{parentName:"h4"},"obj")),(0,r.kt)("p",null,"Can be one of two options:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The JSON object you'd like saved.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object to be updated in userData. Object must contain the original ",(0,r.kt)("inlineCode",{parentName:"td"},"id")," of the object."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"A command object meant to pass ",(0,r.kt)("a",{parentName:"li",href:"/docs/data-modifying-operators"},"data modifying operators")," to the userData to update certain properties only")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Data modifying object."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-5"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-5"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Result object containing userData tag, data and id")))),(0,r.kt)("h5",{id:"result-5"},(0,r.kt)("inlineCode",{parentName:"h5"},"result")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object array inserted in userData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object unique id")))),(0,r.kt)("h4",{id:"more-examples-1"},"More Examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.insert(\n  { name: "John Doe", tel: "555-111-1111" },\n  "contactInfo",\n  false,\n  (err, result) => {\n    if (err) return console.error("Error while inserting your data", err);\n\n    console.log("Insert successful", result);\n    let objectId = result.id;\n\n    buildfire.userData.update(\n      objectId,\n      { name: "John Doe", tel: "555-111-2222" },\n      "contactInfo",\n      (err, updatedResult) => {\n        if (err) return console.error("Error while updating your data", err);\n\n        console.log("Update successful", updatedResult);\n      }\n    );\n  }\n);\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"searchandupdate-"},(0,r.kt)("inlineCode",{parentName:"h3"},"searchAndUpdate()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.searchAndUpdate(search, obj, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to search and update the data object that matches that tag and search query. Use this method to update a multiple records or to update spacific element on each record."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.searchAndUpdate(\n  { name: { $eq: "John Doe" } },\n  { $set: { name: "John Doe Smith" } },\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error(err);\n\n    console.log(result.nModified + " records updated");\n  }\n);\n')),(0,r.kt)("h4",{id:"search"},(0,r.kt)("inlineCode",{parentName:"h4"},"search")),(0,r.kt)("p",null,"JSON object that containing the filter (search query). See ",(0,r.kt)("a",{parentName:"p",href:"/docs/search-operators"},"search operators")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"search")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object containing data filters"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"obj-4"},(0,r.kt)("inlineCode",{parentName:"h4"},"obj")),(0,r.kt)("p",null,"Can be one of two options:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The JSON object you'd like saved.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object to be updated in userData. Object must contain the original ",(0,r.kt)("inlineCode",{parentName:"td"},"id")," of the object."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"A command object meant to pass ",(0,r.kt)("a",{parentName:"li",href:"/docs/data-modifying-operators"},"data modifying operators")," to the userData to update certain properties only")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"obj")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Data modifying object."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-6"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-status"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, status)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"status")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Status object")))),(0,r.kt)("h5",{id:"result-6"},(0,r.kt)("inlineCode",{parentName:"h5"},"result")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Object array inserted in userData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object userData tag")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Object unique id")))),(0,r.kt)("h4",{id:"more-examples-2"},"More Examples"),(0,r.kt)("p",null,"How to update and set values inside array of the data objects"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.bulkInsert(\n  [\n    {\n      name: "John Doe",\n      tel: "555-111-1111",\n      addresses: [{ city: "San Diego" }],\n    },\n    { name: "Mike Rotch", tel: "555-222-2222" },\n  ],\n  "contactInfo",\n  (err, data) => {\n    if (err) return console.error(err);\n\n    console.log("Data inserted successfully");\n\n    buildfire.userData.searchAndUpdate(\n      { name: "John Doe", "addresses.city": "San Diego" },\n      { $set: { "addresses.$.state": "CA" } },\n      "contactInfo",\n      (err, result) => {\n        if (err) return console.error(err);\n\n        console.log(result.nModified + " records updated");\n      }\n    );\n  }\n);\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"delete-"},(0,r.kt)("inlineCode",{parentName:"h3"},"delete()")," ",(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.delete(id, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to delete the data object that matches that tag and object id. If an object doesn't exists this operation will fail."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.delete("YOUR_ID_HERE", "contactInfo", (err, result) => {\n  if (err) return console.error(err);\n\n  console.log("Record deleted");\n});\n')),(0,r.kt)("h4",{id:"id-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"id")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Object id issued when inserting the data. Can be retrieved initially using ",(0,r.kt)("a",{parentName:"td",href:"#"},(0,r.kt)("inlineCode",{parentName:"a"},"get()"))," method."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"tag-7"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-6"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'{"status": "deleted"}'))))),(0,r.kt)("h4",{id:"more-examples-3"},"More examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.insert(\n  { name: "John Doe", tel: "555-111-1111" },\n  "contactInfo",\n  false,\n  (err, result) => {\n    if (err) return console.error("Error while inserting your data", err);\n\n    console.log("Insert successful", result);\n\n    buildfire.userData.delete(result.id, "contactInfo", (err, result) => {\n      if (err) return console.error("Error while deleting your data", err);\n\n      console.log("Record deleted");\n    });\n  }\n);\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"search-"},(0,r.kt)("inlineCode",{parentName:"h3"},"search()")," ",(0,r.kt)("div",{class:"label control"}),(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.search(options, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to search through objects that matches that tag and options criteria. Use this method to search through many records to pull a matching subset. This method allows complex filtering as well as sorting and pagination"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.search(\n  {\n    filter: {\n      $or: [\n        { "$json.rank": { $gt: "600", $lt: "900" } },\n        { "$json.name": "Jane Doe" },\n      ],\n    },\n    sort: { rank: 1, lastName: -1 },\n    fields: ["rank", "lastName"],\n    skip: 20,\n    limit: 10,\n  },\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error("there was a problem retrieving your data");\n\n    console.log("Records found: ", result);\n  }\n);\n')),(0,r.kt)("h4",{id:"options"},(0,r.kt)("inlineCode",{parentName:"h4"},"options")),(0,r.kt)("p",null,"JSON object that contains the filter, sort column, pagination parameters and get total records count."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"filter")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"The format is inspired by MongoDB. While many features overlap they are not a direct match. You must add $json. as a prefix for any property you want to filter. ",(0,r.kt)("a",{parentName:"td",href:"/docs/search-operators"},"See search operators")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"sort")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Object with properties you'd like to sort on with 1 for ascending and -1 for descending"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"fields")),(0,r.kt)("td",{parentName:"tr",align:null},"[string]"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of fields that you'd like to get. If this option is not provided all fields will be returned"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"recordCount")),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"If true the result will return the object with ",(0,r.kt)("inlineCode",{parentName:"td"},"totalRecord")," number and a ",(0,r.kt)("inlineCode",{parentName:"td"},"result")," array"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"page")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Page you want to retrieve. Should be used in combination with ",(0,r.kt)("inlineCode",{parentName:"td"},"pageSize")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"pageSize")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of records per ",(0,r.kt)("inlineCode",{parentName:"td"},"page"),", the max value is ",(0,r.kt)("strong",{parentName:"td"},"50"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"50"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"skip")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of record that you need to skip. Should be used with ",(0,r.kt)("inlineCode",{parentName:"td"},"limit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"limit")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of records for this call, the max value is ",(0,r.kt)("strong",{parentName:"td"},"50"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"50"))))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"For pagination you can either use ",(0,r.kt)("inlineCode",{parentName:"p"},"page")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"pageSize")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"skip")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"limit"),", but not both at the same time")),(0,r.kt)("h4",{id:"tag-8"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-7"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is inserted"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"[object]"," or object"),(0,r.kt)("td",{parentName:"tr",align:null},"If ",(0,r.kt)("inlineCode",{parentName:"td"},"recordCount")," flag is true, the result is object with ",(0,r.kt)("inlineCode",{parentName:"td"},"totalRecord")," number and ",(0,r.kt)("inlineCode",{parentName:"td"},"result")," array, otherwise it's array of fetched objects")))),(0,r.kt)("h4",{id:"more-examples-4"},"More examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.search(\n  {\n    filter: {\n      $or: [\n        { "$json.rank": { $gt: "600", $lt: "900" } },\n        { "$json.name": "Jane Doe" },\n      ],\n    },\n    sort: { rank: 1, lastName: -1 },\n    fields: ["rank", "lastName"],\n    page: "0",\n    pageSize: "10",\n  },\n  "contactInfo",\n  (err, result) => {\n    if (err) return console.error("there was a problem retrieving your data");\n\n    console.log("Found " + result.length + " record(s)");\n    console.log(("Records": result));\n  }\n);\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.search(\n  {\n    filter: {\n      $or: [\n        { "$json.rank": { $gt: "600", $lt: "900" } },\n        { "$json.name": "Jane Doe" },\n      ],\n    },\n    sort: { rank: 1, lastName: -1 },\n    fields: ["rank", "lastName"],\n    skip: 20,\n    limit: 10,\n    recordCount: true,\n  },\n  "contactInfo",\n  (err, data) => {\n    if (err) return console.error("there was a problem retrieving your data");\n\n    console.log("Total records " + data.totalRecord + " record(s)");\n    console.log("Current records " + data.result.length + " record(s)");\n  }\n);\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"aggregate-"},(0,r.kt)("inlineCode",{parentName:"h3"},"aggregate()")," ",(0,r.kt)("div",{class:"label control"}),(0,r.kt)("div",{class:"label widget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.aggregate(params, tag, callback)")),(0,r.kt)("p",null,"Calls the userData to run aggregation pipeline that allow us to analyze documents data in real time and return computed results based on pipeline stages, which we can create an aggregation pipeline that consists of one or more stages. Each stage transforms the documents and passes the output to the next stage."),(0,r.kt)("p",null,"The aggregation pipeline provide results like the ",(0,r.kt)("inlineCode",{parentName:"p"},"total number")," of documents, ",(0,r.kt)("inlineCode",{parentName:"p"},"sum"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"average"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"maximum")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"minimum")," values for objects that matches that tag and pipeline stages."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n         "_buildfire.index.string1": \'fba5d2bc-f880-4bd9-ad7e-c6c48d846f9b\'\n         "status": "success",\n        } \n      },\n      { $group: { _id: null, avgScore: { $avg: "$score" } } }\n    ],\n    skip: 0,\n    limit: 10,\n  },\n  "course_students",\n  (err, result) => {\n    if (err) return console.error("there was a problem aggregating your data");\n\n    console.log(" aggregation results: ", result);\n    /*\n      result\n      [\n         {_id: null, avgScore: 75.4}\n      ]\n    */\n  }\n);\n')),(0,r.kt)("h4",{id:"params"},(0,r.kt)("inlineCode",{parentName:"h4"},"params")),(0,r.kt)("p",null,"JSON object that contains the pipelineStages, pagination parameters."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"pipelineStages")),(0,r.kt)("td",{parentName:"tr",align:null},"[object]"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of objects represent the pipeline stages. The format is inspired by MongoDB Aggregation. Read more about ",(0,r.kt)("a",{parentName:"td",href:"/docs/aggregation"},"Aggregation Pipeline Stages")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"page")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Page you want to retrieve. Should be used in combination with ",(0,r.kt)("inlineCode",{parentName:"td"},"pageSize")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"pageSize")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of records per ",(0,r.kt)("inlineCode",{parentName:"td"},"page"),", the max value is ",(0,r.kt)("strong",{parentName:"td"},"50"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"50"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"skip")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of record that you need to skip. Should be used with ",(0,r.kt)("inlineCode",{parentName:"td"},"limit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"limit")),(0,r.kt)("td",{parentName:"tr",align:null},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of records for this call, the max value is ",(0,r.kt)("strong",{parentName:"td"},"50"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"50"))))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"For pagination you can either use ",(0,r.kt)("inlineCode",{parentName:"p"},"page")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"pageSize")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"skip")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"limit"),", but not both at the same time.")),(0,r.kt)("h4",{id:"tag-9"},(0,r.kt)("inlineCode",{parentName:"h4"},"tag")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tag")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Key used to differentiate your content saved in userData. ex(",(0,r.kt)("inlineCode",{parentName:"td"},"settings")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"questions"),") etc."),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h4",{id:"callbackerr-result-8"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(err, result)")),(0,r.kt)("p",null,"Callback function after data is retrieved"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"err")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"error string, ",(0,r.kt)("inlineCode",{parentName:"td"},"null")," when operation is successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"result")),(0,r.kt)("td",{parentName:"tr",align:null},"[object]"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of objects contain your aggregation results")))),(0,r.kt)("h4",{id:"more-examples-5"},"More examples"),(0,r.kt)("p",null,"The examples use a collection named articles with the following documents:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'{\n  "_id": \'\',\n  "data": { \n    "author" : "dave",\n    "score" : 80,\n    "views" : 100,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "dave",\n    "score" : 85,\n    "views" : 521,\n     "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "max",\n    "score" : 60,\n    "views" : 1000,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "moe",\n    "score" : 55,\n    "views" : 5000,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "chris",\n    "score" : 60,\n    "views" : 50,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "moe",\n    "score" : 94,\n    "views" : 999,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n{\n  "_id": \'\',\n  "data": { \n    "author" : "julia",\n    "score" : 95,\n    "views" : 1000,\n    "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n    "buildfire": {\n      "index": {\n        "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n      }\n    }\n  },\n  "createdOn": \'2021-10-10T22:49:19.623Z\'\n}\n')),(0,r.kt)("h5",{id:"equality-match"},"Equality Match"),(0,r.kt)("p",null,"The following operation uses ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," stage to perform a simple equality match:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match : { "author" : "dave", "_buildfire.index.string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\' } }\n    ],\n    skip: 0,\n    limit: 20\n  },\n  "articles", (err, result) => {\n    if (err) return console.error("there was a problem retrieving your data");\n    // result\n    /* \n    [ {\n      _id: \'\',\n      data: { \n        "author" : "dave",\n        "score" : 80,\n        "views" : 100,\n        "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n        "_buildfire": {\n          "index": {\n            "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n          }\n        }\n      },\n      createdOn: \'2021-10-10T22:49:19.623Z\'\n    },\n    {\n      _id: \'\',\n      data: { \n        "author" : "dave",\n        "score" : 85,\n        "views" : 521,\n        "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n        "_buildfire": {\n          "index": {\n            "string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'\n          }\n        }\n      },\n      createdOn: \'2021-10-10T22:49:19.623Z\'\n    }\n    ]\n    */\n  }\n);\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$match"),' selects the documents where _buildfire.index.string1 equal "e1efdf3a-a8a5-4c5a-8404-005c4b84b510" and  the author field equals "dave", and the aggregation returns the following:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},' [\n    { "author" : "dave", "score" : 80, "views" : 100,  "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\' }\n    { "author" : "dave", "score" : 85, "views" : 521 ,  "userId": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\'}\n ]\n')),(0,r.kt)("h5",{id:"perform-a-count"},"Perform a Count"),(0,r.kt)("p",null,"The following example selects documents to process using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," pipeline operator and then pipes the results to the ",(0,r.kt)("inlineCode",{parentName:"p"},"$group")," pipeline operator to compute a count of the documents:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n        "_buildfire.index.string1": \'e1efdf3a-a8a5-4c5a-8404-005c4b84b510\',\n        $or: [ { "score": { $gt: 70, $lt: 90 } }, { "views": { $gte: 1000 } } ] }\n      },\n      { $group: { _id: null, totalCount: { $sum: 1 } } }\n    ],\n    skip: 0,\n    limit: 10\n  },\n  "articles",\n  (err, result) => {\n\n    // result\n    /* \n    [\n      { "_id" : null, "totalCount" : 5 }\n    ]\n    */\n  }\n);\n')),(0,r.kt)("p",null,"In the aggregation pipeline, ",(0,r.kt)("inlineCode",{parentName:"p"},"$match"),' selects the documents where _buildfire.index.string1 equal "e1efdf3a-a8a5-4c5a-8404-005c4b84b510" and either the score is greater than 70 and less than 90 or the views is greater than or equal to 1000. These documents are then piped to the ',(0,r.kt)("inlineCode",{parentName:"p"},"$group")," to perform a count.\nThe aggregation returns the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'  [\n    { "_id" : null, "totalCount" : 5 }\n  ]\n')),(0,r.kt)("h5",{id:"perform-sum-and-average"},"Perform Sum and Average"),(0,r.kt)("p",null,"The following example selects documents to process using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," pipeline operator and then pipes the results to the ",(0,r.kt)("inlineCode",{parentName:"p"},"$group"),' pipeline operator to compute the sum of views and average of score for "moe" author:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n        "author": "moe",\n        "_buildfire.index.string1": "e1efdf3a-a8a5-4c5a-8404-005c4b84b510"\n      },\n      { \n        $group: { \n          _id: null,\n           totalViews: { $sum: "$views" },\n           avgScore: { $avg: "$score" },\n        }\n      }\n    ],\n    skip: 0,\n    limit: 10\n  },\n  "articles",\n  (err, result) => {\n\n    // result\n    /* \n    [\n      { \n        "_id" : null, \n        "totalViews" : 5999,\n        "avgScore": 74.5\n      }\n    ]\n    */\n  }\n);\n')),(0,r.kt)("p",null,"In the aggregation pipeline, ",(0,r.kt)("inlineCode",{parentName:"p"},"$match"),' selects the documents where _buildfire.index.string1 equal "e1efdf3a-a8a5-4c5a-8404-005c4b84b510" and author field equals "moe". These documents are then piped to the ',(0,r.kt)("inlineCode",{parentName:"p"},"$group")," to compute the  ",(0,r.kt)("inlineCode",{parentName:"p"},"totalViews")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"avgScore"),".\nThe aggregation returns the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'  [\n    { \n      "_id" : null, \n      "totalViews" : 5999,\n      "avgScore": 74.5\n    }\n  ]\n')),(0,r.kt)("h5",{id:"perform-min-and-max-with-grouping"},"Perform Min and Max with Grouping"),(0,r.kt)("p",null,"The following example selects documents to process using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," pipeline operator and then pipes the results to the ",(0,r.kt)("inlineCode",{parentName:"p"},"$group")," pipeline operator to compute the ",(0,r.kt)("inlineCode",{parentName:"p"},"Min")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Max")," of views, and ",(0,r.kt)("inlineCode",{parentName:"p"},"Min")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Max")," of score grouped by author:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n        "_buildfire.index.string1": "e1efdf3a-a8a5-4c5a-8404-005c4b84b510"\n      },\n      { \n        $group: { \n          _id: "$author",\n           minViews: { $min: "$views" },\n           maxViews: { $max: "$views" },\n           minScore: { $min: "$score" },\n           maxScore: { $max: "$score" },\n        }\n      }\n    ],\n    skip: 0,\n    limit: 10\n  },\n  "articles",\n  (err, result) => {\n\n    // result\n    /* \n    [\n      { \n        "_id" : \'dave\', \n        "minViews" : 100,\n        "maxViews": 521,\n        "minScore": 80,\n        "maxScore": 85,\n      },\n      { \n        "_id" : \'max\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 60,\n        "maxScore": 60,\n      },\n      { \n        "_id" : \'moe\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 60,\n        "maxScore": 60,\n      },\n      { \n        "_id" : \'chris\', \n        "minViews" : 999,\n        "maxViews": 5000,\n        "minScore": 55,\n        "maxScore": 94,\n      },\n       { \n        "_id" : \'julia\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 95,\n        "maxScore": 95,\n      },\n    ]\n    */\n  }\n);\n')),(0,r.kt)("p",null,"In the aggregation pipeline, ",(0,r.kt)("inlineCode",{parentName:"p"},"$match"),' selects the documents where _buildfire.index.string1 equal "e1efdf3a-a8a5-4c5a-8404-005c4b84b510". These documents are then piped to the ',(0,r.kt)("inlineCode",{parentName:"p"},"$group")," to compute the  ",(0,r.kt)("inlineCode",{parentName:"p"},"minViews"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"maxViews"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"minScore")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"maxScore")," grouped by author field .\nThe aggregation returns the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'   [\n      { \n        "_id" : \'dave\', \n        "minViews" : 100,\n        "maxViews": 521,\n        "minScore": 80,\n        "maxScore": 85,\n      },\n      { \n        "_id" : \'max\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 60,\n        "maxScore": 60,\n      },\n      { \n        "_id" : \'moe\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 60,\n        "maxScore": 60,\n      },\n      { \n        "_id" : \'chris\', \n        "minViews" : 999,\n        "maxViews": 5000,\n        "minScore": 55,\n        "maxScore": 94,\n      },\n       { \n        "_id" : \'julia\', \n        "minViews" : 1000,\n        "maxViews": 1000,\n        "minScore": 95,\n        "maxScore": 95,\n      },\n    ]\n')),(0,r.kt)("h5",{id:"exclude-fields"},"Exclude Fields"),(0,r.kt)("p",null,"The following example selects documents to process using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," pipeline operator and then pipes the results to the ",(0,r.kt)("inlineCode",{parentName:"p"},"$project")," pipeline operator to includes only the author, and score fields in its output documents:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n        "_buildfire.index.string1": "e1efdf3a-a8a5-4c5a-8404-005c4b84b510"\n      },\n      {  \n        "$project": {"author": 1, "score": 1}\n      }\n    ],\n    skip: 0,\n    limit: 5\n  },\n  "articles",\n  (err, result) => {\n\n    // result\n    /* \n    */\n  }\n);\n')),(0,r.kt)("p",null,"The aggregation result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'[\n  {\n  "data": { \n    "author" : "dave",\n    "score" : 80,\n    }\n  },\n  {\n    "data": { \n      "author" : "dave",\n      "score" : 85,\n    }\n  },\n  {\n    "data": { \n      "author" : "max",\n      "score" : 60,\n    }\n  },\n  {\n    "data": { \n      "author" : "moe",\n      "score" : 55,\n    }\n  },\n  {\n    "data": { \n      "author" : "chris",\n      "score" : 60,\n    }\n  }\n \n]\n')),(0,r.kt)("h4",{id:"full-aggregation-example"},"Full Aggregation Example"),(0,r.kt)("p",null,"The following example selects documents to process using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$match")," pipeline operator and then pipes the results to the ",(0,r.kt)("inlineCode",{parentName:"p"},"$group")," pipeline operator to compute the total of views, and average of score grouped by author then pipes the grouping stage results to ",(0,r.kt)("inlineCode",{parentName:"p"},"$sort")," pipeline that sort the result descending based on ",(0,r.kt)("inlineCode",{parentName:"p"},"totalViews"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'buildfire.userData.aggregate(\n  {\n    pipelineStages: [\n      { $match: { \n        "_buildfire.index.string1": "e1efdf3a-a8a5-4c5a-8404-005c4b84b510",\n        "author": "moe"\n      },\n      { \n        $group: { \n          _id: "$author",\n           totalViews: { $sum: "$views" },\n           avgScore: { $avg: "$score" },\n        }\n      },\n      {  \n        $sort: {"$avgScore": -1}\n      }\n    ],\n    skip: 0,\n    limit: 5\n  },\n  "articles",\n  (err, result) => {\n\n    // result\n    /* \n    */\n  }\n);\n\n')),(0,r.kt)("p",null,"The aggregation result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'[\n  { \n    "_id" : \'julia\', \n    "totalViews" : 1000,\n    "avgScore": 95,\n  },\n  { \n    "_id" : \'dave\', \n    "totalViews" : 621,\n    "avgScore": 82.5,\n  },\n  { \n    "_id" : \'moe\', \n    "totalViews" : 5999,\n    "avgScore": 74.5,\n  },\n  { \n    "_id" : \'max\', \n    "totalViews" : 1000,\n    "avgScore": 60,\n  },\n  \n  { \n    "_id" : \'chris\', \n    "totalViews" : 50,\n    "avgScore": 60,\n  }\n  \n]\n')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"onupdate-"},(0,r.kt)("inlineCode",{parentName:"h3"},"onUpdate()")," ",(0,r.kt)("div",{class:"label wdiget"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"buildfire.userData.onUpdate(callback, allowMultipleHandlers)")),(0,r.kt)("p",null,"Allows you to pass a callback function that is called whenever the control updates data in the userData. Use this method in the widget to be notified that the control made a change so you can reflect that change directly in the widget. Returns a cleanup function to clear the listener."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'let onUpdate = buildfire.userData.onUpdate((event) => {\n  console.log("Data has been updated ", event);\n});\n\n// when you want to stop listening\n// onUpdate.clear();\n')),(0,r.kt)("h4",{id:"callbackevent"},(0,r.kt)("inlineCode",{parentName:"h4"},"callback(event)")),(0,r.kt)("p",null,"Function you pass that gets called on each userData update"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"event")),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"Updated userData records")))),(0,r.kt)("h4",{id:"allowmultiplehandlers"},(0,r.kt)("inlineCode",{parentName:"h4"},"allowMultipleHandlers")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"allowMultipleHandlers")),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"Tells the method to override all other handlers, or allow multiple handlers to exist at the same time."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))))))}s.isMDXComponent=!0}}]);
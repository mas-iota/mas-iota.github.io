(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{167:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return b})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(3),l=n(8),r=(n(0),n(176)),i={id:"public-files",title:"Public Files",sidebar_label:"Public Files",description:null,keywords:["buildfire","public","files","sdk","fileserver"],slug:"/public-files"},b={unversionedId:"public-files",id:"public-files",isDocsHomePage:!1,title:"Public Files",description:"buildfire.services.publicFiles",source:"@site/docs/Public-Files.md",slug:"/public-files",permalink:"/docs/public-files",version:"current",sidebar_label:"Public Files",sidebar:"api",previous:{title:"Search Engine",permalink:"/docs/search-engine"}},c=[{value:"Requirements",id:"requirements",children:[{value:"Widget",id:"widget",children:[]},{value:"Control",id:"control",children:[]}]},{value:"Methods",id:"methods",children:[{value:'<code>showDialog()</code> <div class="label control"></div><div class="label widget"></div>',id:"showdialog",children:[]},{value:'<code>getFileUrl()</code> <div class="label control"></div><div class="label widget"></div>',id:"getfileurl",children:[]},{value:'<code>modifyPermissions()</code> <div class="label control"></div><div class="label widget"></div>',id:"modifypermissions",children:[]},{value:'<code>deleteFile()</code> <div class="label control"></div><div class="label widget"></div>',id:"deletefile",children:[]},{value:'<code>uploadFiles()</code> <div class="label control"></div><div class="label widget"></div>',id:"uploadfiles",children:[]},{value:"Managing Permissions",id:"managing-permissions",children:[]}]}],o={toc:c};function p(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"buildfireservicespublicfiles"},Object(r.b)("inlineCode",{parentName:"h1"},"buildfire.services.publicFiles")),Object(r.b)("p",null,"API accessible via the plugin SDK that allows plugin developers to upload files to our servers."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"Additional charges may be added to the app owner. Current Maximum file size is 1 GB."))),Object(r.b)("h2",{id:"requirements"},"Requirements"),Object(r.b)("h3",{id:"widget"},"Widget"),Object(r.b)("p",null,"Include ",Object(r.b)("inlineCode",{parentName:"p"},"publicFiles.js")," file in widget header right after the ",Object(r.b)("inlineCode",{parentName:"p"},"buildfire.min.js")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html"},'<head>\n  \x3c!-- ... --\x3e\n  <script src="../../../scripts/buildfire.min.js"><\/script>\n  <script src="../../../scripts/buildfire/services/publicFiles/publicFiles.js"><\/script>\n</head>\n')),Object(r.b)("h3",{id:"control"},"Control"),Object(r.b)("p",null,"Include ",Object(r.b)("inlineCode",{parentName:"p"},"publicFiles.js")," file in control header right after the ",Object(r.b)("inlineCode",{parentName:"p"},"buildfire.min.js")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html"},'<head>\n  \x3c!-- ... --\x3e\n  <script src="../../../../scripts/buildfire.min.js"><\/script>\n  <script src="../../../../scripts/buildfire/services/publicFiles/publicFiles.js"><\/script>\n</head>\n')),Object(r.b)("h2",{id:"methods"},"Methods"),Object(r.b)("h3",{id:"showdialog"},Object(r.b)("inlineCode",{parentName:"h3"},"showDialog()")," ",Object(r.b)("div",{class:"label control"}),Object(r.b)("div",{class:"label widget"})),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"buildfire.services.publicFiles.showDialog(options, onProgress, onComplete, callback)")),Object(r.b)("p",null,"This method will show up the browse dialog in order to be used by the app user to select the needed files."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'buildfire.services.publicFiles.showDialog(\n  { filter: ["image/jpeg", "image/png"], allowMultipleFilesUpload: true },\n  (onProgress) => {\n    console.log("onProgress" + JSON.stringify(onProgress));\n  },\n  (onComplete) => {\n    console.log("onComplete" + JSON.stringify(onComplete));\n  },\n  (err, files) => {\n    if (err) return console.error(err);\n\n    console.log("Files", files);\n  }\n);\n')),Object(r.b)("h4",{id:"options"},Object(r.b)("inlineCode",{parentName:"h4"},"options")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"allowMultipleFilesUpload")),Object(r.b)("td",{parentName:"tr",align:null},"boolean"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality for allowing the users to select multiple files or single file."),Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"false"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"filter")),Object(r.b)("td",{parentName:"tr",align:null},"[string]"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality to filter the file types allowed to be uploaded."),Object(r.b)("td",{parentName:"tr",align:null})),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"permissions")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality to restrict file access by managing users who have read, write, delete and admin access to file. If no permissions object is passed, file will be public by default. Read more on permissions management below."),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"onprogress"},Object(r.b)("inlineCode",{parentName:"h4"},"onProgress")),Object(r.b)("p",null,"Function that will be invoked when uploading each file and it will return the percentage of completion for each file"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"onProgress")),Object(r.b)("td",{parentName:"tr",align:null},"function"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Function that will be invoked when uploading each file and it will return the percentage of completion for each file"),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"oncomplete"},Object(r.b)("inlineCode",{parentName:"h4"},"onComplete")),Object(r.b)("p",null,"Function will be invoked after each file has been uploaded and it will be called on each file completion."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"onComplete")),Object(r.b)("td",{parentName:"tr",align:null},"function"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Function will be invoked after each file has been uploaded and it will be called on each file completion."),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"callbackerr-files"},Object(r.b)("inlineCode",{parentName:"h4"},"callback(err, files)")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"err")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"error string, ",Object(r.b)("inlineCode",{parentName:"td"},"null")," when operation is successful")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"files")),Object(r.b)("td",{parentName:"tr",align:null},"[object]"),Object(r.b)("td",{parentName:"tr",align:null},"Array of file objects")))),Object(r.b)("h4",{id:"file"},"file"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileId")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File unique id")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileName")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"Name of the file")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"url")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File url used to access the file")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"size")),Object(r.b)("td",{parentName:"tr",align:null},"number"),Object(r.b)("td",{parentName:"tr",align:null},"File size in KB")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"status")),Object(r.b)("td",{parentName:"tr",align:null},"[]"),Object(r.b)("td",{parentName:"tr",align:null},"File upload status ",Object(r.b)("inlineCode",{parentName:"td"},'"failed"')," or ",Object(r.b)("inlineCode",{parentName:"td"},'"success"'))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"type")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File type")))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"getfileurl"},Object(r.b)("inlineCode",{parentName:"h3"},"getFileUrl()")," ",Object(r.b)("div",{class:"label control"}),Object(r.b)("div",{class:"label widget"})),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"buildfire.services.publicFiles.getFileUrl(options, callback)")),Object(r.b)("p",null,'This method will get signed url that enables access to private files. Any file without "public" in read permissions is considered private.'),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"In case the file is not private, it can be accessed directly using url returned from showDialog callback. Read more on permissions management below."))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'buildfire.services.publicFiles.getFileUrl(\n  { fileId: "thisIsFileIdFromShowDialogCallback" },\n  (err, file) => {\n    if (err) return console.error(err);\n\n    console.log("File url", file.url);\n  }\n);\n')),Object(r.b)("h4",{id:"options-1"},Object(r.b)("inlineCode",{parentName:"h4"},"options")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileId")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Unique file id"),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"callbackerr-file"},Object(r.b)("inlineCode",{parentName:"h4"},"callback(err, file)")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"err")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"error string, ",Object(r.b)("inlineCode",{parentName:"td"},"null")," when operation is successful")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"file")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"Object containing ",Object(r.b)("inlineCode",{parentName:"td"},"url"))))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"modifypermissions"},Object(r.b)("inlineCode",{parentName:"h3"},"modifyPermissions()")," ",Object(r.b)("div",{class:"label control"}),Object(r.b)("div",{class:"label widget"})),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"buildfire.services.publicFiles.modifyPermissions(options, callback)")),Object(r.b)("p",null,"This method will modify file permissions. User needs to be file admin in order to change file permissions. Read more on permissions management below."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'buildfire.services.publicFiles.modifyPermissions(\n  {\n    fileId: "thisIsFileIdFromShowDialogCallback",\n    permissions: {\n      read: ["public"],\n      write: ["user@email.com"],\n      delete: ["user@email.com"],\n      admin: ["user@email.com"],\n    },\n  },\n  (err, file) => {\n    if (err) return console.error(err);\n\n    console.log("File permissions updated", file);\n  }\n);\n')),Object(r.b)("h4",{id:"options-2"},Object(r.b)("inlineCode",{parentName:"h4"},"options")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileId")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Unique file id"),Object(r.b)("td",{parentName:"tr",align:null})),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"permissions")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"New permissions"),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"callbackerr-file-1"},Object(r.b)("inlineCode",{parentName:"h4"},"callback(err, file)")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"err")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"error string, ",Object(r.b)("inlineCode",{parentName:"td"},"null")," when operation is successful")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"file")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"Modified file")))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"deletefile"},Object(r.b)("inlineCode",{parentName:"h3"},"deleteFile()")," ",Object(r.b)("div",{class:"label control"}),Object(r.b)("div",{class:"label widget"})),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"buildfire.services.publicFiles.deleteFile(options, callback)")),Object(r.b)("p",null,"This method will modify file permissions. User needs to be file admin in order to change file permissions. Read more on permissions management below."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'buildfire.services.publicFiles.deleteFile(\n  {\n    fileId: "thisIsFileIdFromShowDialogCallback",\n  },\n  (err, file) => {\n    if (err) return console.error(err);\n\n    console.log("File deleted", file);\n  }\n);\n')),Object(r.b)("h4",{id:"options-3"},Object(r.b)("inlineCode",{parentName:"h4"},"options")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileId")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Unique file id"),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"callbackerr-file-2"},Object(r.b)("inlineCode",{parentName:"h4"},"callback(err, file)")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"err")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"error string, ",Object(r.b)("inlineCode",{parentName:"td"},"null")," when operation is successful")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"file")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"Deleted file")))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"uploadfiles"},Object(r.b)("inlineCode",{parentName:"h3"},"uploadFiles()")," ",Object(r.b)("div",{class:"label control"}),Object(r.b)("div",{class:"label widget"})),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"buildfire.services.publicFiles.uploadFiles(files, options, onProgress, onComplete, callback)")),Object(r.b)("p",null,"This method lets plugin developers upload files without showing file dialog. This way developer has more freedom on how to display file selection."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"The user must be logged in otherwise the function will return a callback error"))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'buildfire.services.publicFiles.uploadFiles(\n  {\n    files: [new File()],\n  },\n  (onProgress) => {\n    console.log("onProgress" + JSON.stringify(onProgress));\n  },\n  (onComplete) => {\n    console.log("onComplete" + JSON.stringify(onComplete));\n  },\n  (err, files) => {\n    if (err) return console.error(err);\n\n    console.log("Files", files);\n  }\n);\n')),Object(r.b)("h4",{id:"files"},Object(r.b)("inlineCode",{parentName:"h4"},"files")),Object(r.b)("p",null,"Array of javascript ",Object(r.b)("inlineCode",{parentName:"p"},"File")," objects"),Object(r.b)("h4",{id:"options-4"},Object(r.b)("inlineCode",{parentName:"h4"},"options")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"allowMultipleFilesUpload")),Object(r.b)("td",{parentName:"tr",align:null},"boolean"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality for allowing the users to select multiple files or single file."),Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"false"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"filter")),Object(r.b)("td",{parentName:"tr",align:null},"[string]"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality to filter the file types allowed to be uploaded."),Object(r.b)("td",{parentName:"tr",align:null})),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"permissions")),Object(r.b)("td",{parentName:"tr",align:null},"object"),Object(r.b)("td",{parentName:"tr",align:null},"no"),Object(r.b)("td",{parentName:"tr",align:null},"This property will give the plugin developers the functionality to restrict file access by managing users who have read, write, delete and admin access to file. If no permissions object is passed, file will be public by default. Read more on permissions management below."),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"onprogress-1"},Object(r.b)("inlineCode",{parentName:"h4"},"onProgress")),Object(r.b)("p",null,"Function that will be invoked when uploading each file and it will return the percentage of completion for each file"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"onProgress")),Object(r.b)("td",{parentName:"tr",align:null},"function"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Function that will be invoked when uploading each file and it will return the percentage of completion for each file"),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"oncomplete-1"},Object(r.b)("inlineCode",{parentName:"h4"},"onComplete")),Object(r.b)("p",null,"Function will be invoked after each file has been uploaded and it will be called on each file completion."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Required"),Object(r.b)("th",{parentName:"tr",align:null},"Description"),Object(r.b)("th",{parentName:"tr",align:null},"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"onComplete")),Object(r.b)("td",{parentName:"tr",align:null},"function"),Object(r.b)("td",{parentName:"tr",align:null},"yes"),Object(r.b)("td",{parentName:"tr",align:null},"Function will be invoked after each file has been uploaded and it will be called on each file completion."),Object(r.b)("td",{parentName:"tr",align:null})))),Object(r.b)("h4",{id:"callbackerr-files-1"},Object(r.b)("inlineCode",{parentName:"h4"},"callback(err, files)")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"err")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"error string, ",Object(r.b)("inlineCode",{parentName:"td"},"null")," when operation is successful")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"files")),Object(r.b)("td",{parentName:"tr",align:null},"[object]"),Object(r.b)("td",{parentName:"tr",align:null},"Array of file objects")))),Object(r.b)("h4",{id:"file-1"},"file"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileId")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File unique id")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"fileName")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"Name of the file")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"url")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File url used to access the file")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"size")),Object(r.b)("td",{parentName:"tr",align:null},"number"),Object(r.b)("td",{parentName:"tr",align:null},"File size in KB")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"status")),Object(r.b)("td",{parentName:"tr",align:null},"[]"),Object(r.b)("td",{parentName:"tr",align:null},"File upload status ",Object(r.b)("inlineCode",{parentName:"td"},'"failed"')," or ",Object(r.b)("inlineCode",{parentName:"td"},'"success"'))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"type")),Object(r.b)("td",{parentName:"tr",align:null},"string"),Object(r.b)("td",{parentName:"tr",align:null},"File type")))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"managing-permissions"},"Managing Permissions"),Object(r.b)("p",null,"Permissions object"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Name"),Object(r.b)("th",{parentName:"tr",align:null},"Type"),Object(r.b)("th",{parentName:"tr",align:null},"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"read")),Object(r.b)("td",{parentName:"tr",align:null},"Array"),Object(r.b)("td",{parentName:"tr",align:null},"Who can access file?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"write")),Object(r.b)("td",{parentName:"tr",align:null},"Array"),Object(r.b)("td",{parentName:"tr",align:null},"Who can edit file?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"delete")),Object(r.b)("td",{parentName:"tr",align:null},"Array"),Object(r.b)("td",{parentName:"tr",align:null},"Who can delete file?")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("inlineCode",{parentName:"td"},"admin")),Object(r.b)("td",{parentName:"tr",align:null},"Array"),Object(r.b)("td",{parentName:"tr",align:null},"Who can change the read, write and delete arrays above?")))),Object(r.b)("p",null,"Each Array above can be made by each of the following:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"userId")," BuildFire user id"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"email")," Email linked to BuildFire user"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"tag")," BuildFire tag"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"public")," word public")),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n  "read": ["public"],\n  "write": ["janedoe@example.com", "__ADMIN__"],\n  "delete": ["user@example.com"],\n  "admin": ["user@example.com"]\n}\n')),Object(r.b)("p",null,"In the example above, anyone with link can access file since read permission have word public inside. User with email ",Object(r.b)("inlineCode",{parentName:"p"},"janedoe@example")," and anyone with tag ",Object(r.b)("inlineCode",{parentName:"p"},"__ADMIN__")," can edit file. Only user with ",Object(r.b)("inlineCode",{parentName:"p"},"user@example.com")," can delete file and change file permissions."),Object(r.b)("p",null,"If no permsissions object is passed in any of the functions above it defaults to"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n  "read": ["public"],\n  "write": ["public"],\n  "delete": ["public"],\n  "admin": ["user@example.com"]\n}\n')),Object(r.b)("p",null,"where ",Object(r.b)("a",{parentName:"p",href:"mailto:user@example.com"},"user@example.com")," is email of the user uploading the file."))}p.isMDXComponent=!0},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(0),l=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=l.a.createContext({}),p=function(e){var t=l.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):b(b({},t),e)),n},d=function(e){var t=p(e.components);return l.a.createElement(o.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},m=l.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,u=d["".concat(i,".").concat(m)]||d[m]||s[m]||r;return n?l.a.createElement(u,b(b({ref:t},o),{},{components:n})):l.a.createElement(u,b({ref:t},o))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var b={};for(var c in t)hasOwnProperty.call(t,c)&&(b[c]=t[c]);b.originalType=e,b.mdxType="string"==typeof e?e:a,i[1]=b;for(var o=2;o<r;o++)i[o]=n[o];return l.a.createElement.apply(null,i)}return l.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);